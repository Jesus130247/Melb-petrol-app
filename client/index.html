<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="../public/favicon.ico">
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDU</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>

    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">


    <script type="module" src="/client.js"></script>

</head>
<body>
    
    <div class="container">
        <aside class="left">
            <div class="title">
                <h1 style="font-size: 32px;">Petrol down-under</h1>
            </div>
            <div class="spotlight">
                <h1 style="text-decoration: underline; margin-left: 10px;">Spotlight Station
                    <span class="refresh">refresh</span>
                </h1> 
                <span class="randomStation"></span>
            </div>
            <div class="search_location">
                <form action="">
                    <label for=""> OR Search Location by lat/long</label>
                    <br />
                    <label class="lat-label" for="">LAT: </label>
                    <input type="text" class="lat-input">
                    <br />
                    <label for="">LNG: </label>
                    <input type="text" class="lng-input">
                    <button>Search</button>
                </form>
            </div>
            <div class="stats">
                <h1>Stats</h1>

            </div>
            <div class="about_left">
                <h2>TEAM JESUS</h2>
                <div class="about">                   
                    <ul>
                        <li id="jf">
                            <a href="https://github.com/CobaltDingus" target="_blank">
                                <img src="https://avatars.githubusercontent.com/u/76943891?v=4" alt="">
                                <span class="about-names">JF</span>
                            </a>
                        </li>
                        <li id="alex">
                            <a href="https://github.com/shandakei" target="_blank">
                                <img src="https://avatars.githubusercontent.com/u/164013420?v=4" alt="">
                                <span class="about-names">Alex</span>
                            </a>
                        </li>
                    </ul>                 
                </div>
            </div>
        </aside>
        <main class="map">
            <div id="map"></div>
        </main>
        <aside class="right">

            <section class="date_temperature"></section>
            <div class="center-location">
                <h2 style="text-decoration: underline;">Map center location</h2>
                <span class="center-coords"></span>
                <button class="lookup-address-btn">Lookup address</button>
                <section class="lookup-address"></section>
            </div>
            <div class="postcode">
                <div class="display_postcode">
                    <div class="cont">
                        <h1> Search Postcode</h1>
                        <form action="" class="postcode-form">
                            <input type="text" class="postcode-input">
                            <button>search</button>
                        </form>
                    </div>
                    <ul class="suburb-list">
                        <!-- <li></li> -->
                    </ul>
                </div>
            </div>
            <section class="near-stations-list">
                <h1>Nearest Stations</h1>
                <ul>
                    <!-- <li>
                        <p>name</p>
                        <p>address</p>
                        <p>owner</p>
                    </li> -->
                </ul>
            </section>
            <div class="about_right">
                <h2>TEAM JESUS</h2>
                <div class="about">
                    <ul>
                        <li id="leo">
                            <a href="https://github.com/Jesus130247" target="_blank">
                                <img src="https://avatars.githubusercontent.com/u/150982381?v=4" alt="">
                                <span class="about-names">Leo</span>
                            </a>
                        </li>
                        <li id="ting">
                            <a href="https://github.com/LiPuSure" target="_blank">
                                <img src="https://avatars.githubusercontent.com/u/117793395?s=96&v=4" alt="">
                                <span class="about-names">Ting</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>   
        </aside>
    </div>
    <script>
        fetch('/api/maps-key')
          .then(response => response.json())
          .then(data => {
            
            (g => {
              var h, a, k, p = "The Google Maps JavaScript API", c = "google", l = "importLibrary", q = "__ib__", m = document, b = window;
              b = b[c] || (b[c] = {});
              var d = b.maps || (b.maps = {}), r = new Set, e = new URLSearchParams, u = () => h || (h = new Promise(async (f, n) => {
                await (a = m.createElement("script"));
                e.set("libraries", [...r] + "");
                for (k in g) e.set(k.replace(/[A-Z]/g, t => "_" + t[0].toLowerCase()), g[k]);
                e.set("callback", c + ".maps." + q);
                a.src = `https://maps.${c}apis.com/maps/api/js?key=${data.apiKey}&` + e;
                d[q] = f;
                a.onerror = () => h = n(Error(p + " could not load."));
                a.nonce = m.querySelector("script[nonce]")?.nonce || "";
                m.head.append(a);
              }));
              d[l] ? console.warn(p + " only loads once. Ignoring:", g) : d[l] = (f, ...n) => r.add(f) && u().then(() => d[l](f, ...n));
            })({
              v: "weekly"
            });
          })
          .catch(error => console.error('Error fetching API key:', error));
      </script>
      
</body>
</html>